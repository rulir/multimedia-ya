"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),App=function(){function e(t){_classCallCheck(this,e),this.appEl=t,this.form=this.appEl.querySelector(".source-links-form"),this.form.addEventListener("submit",this._onSourceLinksFormSubmit.bind(this))}return _createClass(e,[{key:"_onSourceLinksFormSubmit",value:function(e){e.preventDefault();var t="./assets/video/overlay.mp4";this.overlayCanvas=this.appEl.querySelector(".canvas-overlay"),this.urlMap={videoUrl:this.appEl.querySelector("#videoUrl").value,subsUrl:this.appEl.querySelector("#subUrl").value,audioUrl:this.appEl.querySelector("#audioUrl").value},this.appEl.querySelector(".initial-page").classList.add("initial-page_hidden"),this.appEl.querySelector(".video-page").classList.remove("video-page_hidden"),this.subs=new Subs(this.urlMap),this.player=new Player(this.appEl.querySelector(".video-custom"),this.urlMap.videoUrl,this.subs),this.overlayPlayer=new Player(this.appEl.querySelector(".video-overlay"),t,this.subs),this.audio=new Audio(this.appEl.querySelector(".audio"),this.urlMap.audioUrl),this.canvas=new Canvas(this.appEl.querySelector(".canvas"),this.player,this.overlayPlayer,this.subs,this.overlayCanvas,this.audio)}}]),e}(),Player=function(){function e(t,i,s){_classCallCheck(this,e),this.playerEl=t,this.videoUrl=i,this.isPlaying=!1,this.width=640,this.height=360,this.playerEl.width=this.width,this.playerEl.height=this.height,this.videoSourceEl=document.createElement("source"),this.videoSourceEl.setAttribute("src",this.videoUrl),this.playerEl.appendChild(this.videoSourceEl)}return _createClass(e,[{key:"play",value:function(){this.playerEl.play()}},{key:"pause",value:function(){this.playerEl.pause()}}]),e}(),Canvas=function(){function e(t,i,s,a,r,l){_classCallCheck(this,e),this.canvasEl=t,this.overlayCanvas=r,this.player=i,this.overlayPlayer=s,this.subs=a,this.audio=l,this.overlayCanvasContext=this.overlayCanvas.getContext("2d"),this.subsCurrСue=0,this.context=this.canvasEl.getContext("2d"),this.canvasEl.addEventListener("click",this._onCanvasClick.bind(this)),this.canvasEl.width=this.player.width,this.canvasEl.height=this.player.height,this.context.fillStyle="rgb(30, 30, 30)",this.context.fillRect(0,0,this.canvasEl.width,this.canvasEl.height)}return _createClass(e,[{key:"_onCanvasClick",value:function(e){if(this.player.isPlaying)this.player.pause(),this.overlayPlayer.pause(),this.audio.pause(),clearTimeout(this.t1),clearTimeout(this.t2),cancelAnimationFrame(this.textReq),cancelAnimationFrame(this.videoReq),this.player.isPlaying=!this.player.isPlaying;else{if(this.checkSubsAvailability(e)===!1)return;this.subs.parsedSubs=this.getNeededSubsForThisTime(),this.subsCurrСue=0,this.player.play(),this.overlayPlayer.play(),this.audio.play(),this.startTimeСountup(),cancelAnimationFrame(this.textReq),this.videoReq=requestAnimationFrame(this.watchTheVideo.bind(this)),this.player.isPlaying=!this.player.isPlaying}}},{key:"getNeededSubsForThisTime",value:function(){var e=parseInt(1e3*this.player.playerEl.currentTime),t=this.subs.parsedSubs.filter(function(t){if(t.endTime>=e)return!0});return t}},{key:"resumePlayAfterSubs",value:function(){this.player.play(),this.startTimeСountup(),cancelAnimationFrame(this.textReq),this.videoReq=requestAnimationFrame(this.watchTheVideo.bind(this))}},{key:"startTimeСountup",value:function(){var e=this,t=this.subs.parsedSubs[this.subsCurrСue].endTime-1e3*parseInt(this.player.playerEl.currentTime),i=this.subs.parsedSubs[this.subsCurrСue].endTime-this.subs.parsedSubs[this.subsCurrСue].startTime;this.t1=setTimeout(function(){e.player.pause(),cancelAnimationFrame(e.videoReq),e.textReq=requestAnimationFrame(e.drowText.bind(e)),clearTimeout(e.t1),e.t2=setTimeout(function(){e.subsCurrСue<e.subs.parsedSubs.length-1?e.subsCurrСue++:e.subsCurrСue=0,e.resumePlayAfterSubs(),clearTimeout(e.t2)},i)},t)}},{key:"watchTheVideo",value:function(){this.paintFrame(),cancelAnimationFrame(this.textReq),this.videoReq=requestAnimationFrame(this.watchTheVideo.bind(this))}},{key:"paintFrame",value:function(){this.context.drawImage(this.player.playerEl,0,0,this.player.width,this.player.height),this.context.globalCompositeOperation="color",this.context.fillStyle="rgb(255, 255, 255)",this.context.fillRect(0,0,this.canvasEl.width,this.canvasEl.height),this.paintOverlayEffect()}},{key:"paintOverlayEffect",value:function(){this.overlayCanvasContext.drawImage(this.overlayPlayer.playerEl,0,0,this.overlayPlayer.width,this.overlayPlayer.height);var e=this.overlayCanvasContext.getImageData(0,0,this.canvasEl.width,this.canvasEl.height);this.overlayCanvasContext.putImageData(e,0,0),this.context.globalCompositeOperation="multiply",this.context.drawImage(this.overlayCanvas,0,0,this.canvasEl.width,this.canvasEl.height),this.context.globalCompositeOperation="source-over"}},{key:"drowText",value:function(e){this.context.fillStyle="rgb(50, 50, 50)",this.context.fillRect(0,0,this.canvasEl.width,this.canvasEl.height),this.context.font="36px Oranienbaum",this.context.textAlign="center",this.context.fillStyle="rgb(255, 255, 255)",this.wrapText(this.subs.parsedSubs[this.subsCurrСue].text,this.canvasEl.width,40,this.canvasEl.width/2,this.canvasEl.height/2),this.paintOverlayEffect(),cancelAnimationFrame(this.videoReq),this.textReq=requestAnimationFrame(this.drowText.bind(this))}},{key:"wrapText",value:function(e,t,i,s,a){for(var r=e.split(" "),l="",n=0;n<r.length;n++){var h=l+r[n]+" ",u=this.context.measureText(h).width;u>t-50?(this.context.fillText(l,s,a),l=r[n]+" ",a+=i):l=h}this.context.fillText(l,s,a)}},{key:"checkSubsAvailability",value:function(e){if(!this.subs.ready)return e.preventDefault(),this.player.pause(),this.player.playerEl.currentTime=0,!1}}]),e}(),Subs=function(){function e(t){var i=this;_classCallCheck(this,e),this.ready=!1,fetch(t.subsUrl).then(function(e){e.text().then(function(e){i.parsedSubs=i.parseFromSrt(e),i.ready=!0})})}return _createClass(e,[{key:"parseFromSrt",value:function(e){function t(e,t){var i=t[e].split(":"),s=i[0],a=Number(i[1]),r=i[2].split(","),l=Number(r[0]),n=Number(r[1]);t[e]=36e5*s+6e4*a+1e3*l+n}var i=parser.fromSrt(e);return i.map(function(e){t("endTime",e),t("startTime",e)}),i}}]),e}(),Audio=function(){function e(t,i){_classCallCheck(this,e),this.audioEl=t,this.url=i,this.audioSourceEl=document.createElement("source"),this.audioSourceEl.setAttribute("src",this.url),this.audioEl.appendChild(this.audioSourceEl)}return _createClass(e,[{key:"play",value:function(){this.audioEl.play()}},{key:"pause",value:function(){this.audioEl.pause()}}]),e}(),app=new App(document.querySelector(".app"));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImJ1bmRsZS5qcyJdLCJuYW1lcyI6WyJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsIkFwcCIsImVsIiwidGhpcyIsImFwcEVsIiwiZm9ybSIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiX29uU291cmNlTGlua3NGb3JtU3VibWl0IiwiYmluZCIsInZhbHVlIiwiZSIsInByZXZlbnREZWZhdWx0Iiwib3ZlcmxheVZpZGVvVXJsIiwib3ZlcmxheUNhbnZhcyIsInVybE1hcCIsInZpZGVvVXJsIiwic3Vic1VybCIsImF1ZGlvVXJsIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwic3VicyIsIlN1YnMiLCJwbGF5ZXIiLCJQbGF5ZXIiLCJvdmVybGF5UGxheWVyIiwiYXVkaW8iLCJBdWRpbyIsImNhbnZhcyIsIkNhbnZhcyIsInVybCIsInBsYXllckVsIiwiaXNQbGF5aW5nIiwid2lkdGgiLCJoZWlnaHQiLCJ2aWRlb1NvdXJjZUVsIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiYXBwZW5kQ2hpbGQiLCJwbGF5IiwicGF1c2UiLCJjYW52YXNFbCIsIm92ZXJsYXlDYW52YXNDb250ZXh0IiwiZ2V0Q29udGV4dCIsInN1YnNDdXJy0KF1ZSIsImNvbnRleHQiLCJfb25DYW52YXNDbGljayIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwiY2xlYXJUaW1lb3V0IiwidDEiLCJ0MiIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwidGV4dFJlcSIsInZpZGVvUmVxIiwiY2hlY2tTdWJzQXZhaWxhYmlsaXR5IiwicGFyc2VkU3VicyIsImdldE5lZWRlZFN1YnNGb3JUaGlzVGltZSIsInN0YXJ0VGltZdChb3VudHVwIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwid2F0Y2hUaGVWaWRlbyIsImN1cnJlbnRUaW1lIiwicGFyc2VJbnQiLCJmaWx0ZXJlZFN1YnMiLCJmaWx0ZXIiLCJpdGVtIiwiZW5kVGltZSIsIl90aGlzIiwiZGVsYXlUb1N0YXJ0T2ZTdWJzIiwicGF1c2VEdXJhdGlvbiIsInN0YXJ0VGltZSIsInNldFRpbWVvdXQiLCJkcm93VGV4dCIsInJlc3VtZVBsYXlBZnRlclN1YnMiLCJwYWludEZyYW1lIiwiZHJhd0ltYWdlIiwiZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uIiwicGFpbnRPdmVybGF5RWZmZWN0IiwiaW1hZ2VEYXRhIiwiZ2V0SW1hZ2VEYXRhIiwicHV0SW1hZ2VEYXRhIiwidGV4dCIsImZvbnQiLCJ0ZXh0QWxpZ24iLCJ3cmFwVGV4dCIsIm1heFdpZHRoIiwibGluZUhlaWdodCIsIm1hcmdpbkxlZnQiLCJtYXJnaW5Ub3AiLCJ3b3JkcyIsInNwbGl0IiwibGluZSIsInRlbXBvcmFyeVRleHRMaW5lIiwidGVtcG9yYXJ5VGV4dExpbmVXaWR0aCIsIm1lYXN1cmVUZXh0IiwiZmlsbFRleHQiLCJyZWFkeSIsIl90aGlzMiIsImZldGNoIiwidGhlbiIsInJlcyIsImRhdGEiLCJwYXJzZUZyb21TcnQiLCJzcnQiLCJ0aW1lUGFyc2VUb01zIiwidGltZVR5cGUiLCJzdWJzU3RhcnRUaW1lQnVmZmVyIiwiaG91cnMiLCJtaW5zIiwiTnVtYmVyIiwic2Vjc0FuZE1zZWNzQnVmZmVyIiwic2VjcyIsIm1zZWNzIiwicGFyc2VyIiwiZnJvbVNydCIsIm1hcCIsImF1ZGlvRWwiLCJhdWRpb1NvdXJjZUVsIiwiYXBwIl0sIm1hcHBpbmdzIjoiQUFBQSxZQ01BLFNBQVNBLGlCQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZ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b0MsU0FBUy9CLGNBQWMiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8q0LrQu9Cw0YHRgSDQv9GA0LjQu9C+0LbQtdC90LjRjyovXG5jbGFzcyBBcHAge1xuXHRjb25zdHJ1Y3RvcihlbCkge1xuXHRcdHRoaXMuYXBwRWwgPSBlbDtcblx0XHR0aGlzLmZvcm0gPSB0aGlzLmFwcEVsLnF1ZXJ5U2VsZWN0b3IoJy5zb3VyY2UtbGlua3MtZm9ybScpO1xuXHRcdHRoaXMuZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLl9vblNvdXJjZUxpbmtzRm9ybVN1Ym1pdC5iaW5kKHRoaXMpKTtcblx0fTtcblxuXHQvKtC+0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPINC+0YLQv9GA0LDQstC60Lgg0YTQvtGA0LzRiy4g0KHQvtCx0LjRgNCw0LXRgiDQtNCw0L3QvdGL0LUg0LjQtyDQv9C+0LvQtSDQuCDQvtGB0YPRidC10YHRgtCy0LvRj9C10YIg0LjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y4g0Y3Qu9C10LzQtdC90YLQvtCyINCy0YLQvtGA0L7QuSDRgdGC0YDQsNC90LjRhtGLKi9cblx0X29uU291cmNlTGlua3NGb3JtU3VibWl0KGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0bGV0IG92ZXJsYXlWaWRlb1VybCA9ICcuL2Fzc2V0cy92aWRlby9vdmVybGF5Lm1wNCc7IC8v0LLQuNC00LXQviDQtNC70Y8g0YHQvtC30LTQsNC90LjRjyDRjdGE0YTQtdC60YLQsCDRgdGC0LDRgNC40L3Ri1xuXHRcdHRoaXMub3ZlcmxheUNhbnZhcyA9IHRoaXMuYXBwRWwucXVlcnlTZWxlY3RvcignLmNhbnZhcy1vdmVybGF5Jyk7IC8v0YPQt9C10Lsg0LrQsNC90LLQsNGB0LAg0LTQu9GPINC+0YLRgNC40YHQvtCy0LrQuCDRjdGE0LXQutGC0LAg0YHRgtCw0YDQuNC90YtcblxuXHRcdC8q0YPRgNC70Ysg0LLQuNC00LXQviwg0LDRg9C00LjQviDQuCDRgdGD0LHRgtC40YLRgNC+0LIg0LLQstC10LTQtdC90L3Ri9C1INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtdC8Ki9cblx0XHR0aGlzLnVybE1hcCA9IHtcblx0XHRcdHZpZGVvVXJsOiB0aGlzLmFwcEVsLnF1ZXJ5U2VsZWN0b3IoJyN2aWRlb1VybCcpLnZhbHVlLFxuXHRcdFx0c3Vic1VybDogdGhpcy5hcHBFbC5xdWVyeVNlbGVjdG9yKCcjc3ViVXJsJykudmFsdWUsXG5cdFx0XHRhdWRpb1VybDogdGhpcy5hcHBFbC5xdWVyeVNlbGVjdG9yKCcjYXVkaW9VcmwnKS52YWx1ZSxcblx0XHR9O1xuXHRcdHRoaXMuYXBwRWwucXVlcnlTZWxlY3RvcignLmluaXRpYWwtcGFnZScpLmNsYXNzTGlzdC5hZGQoJ2luaXRpYWwtcGFnZV9oaWRkZW4nKTsgLy/RgdGC0YDQsNC90LjRhtCwINGBINGE0L7RgNC80L7QuVxuXHRcdHRoaXMuYXBwRWwucXVlcnlTZWxlY3RvcignLnZpZGVvLXBhZ2UnKS5jbGFzc0xpc3QucmVtb3ZlKCd2aWRlby1wYWdlX2hpZGRlbicpOyAvL9GB0YLRgNCw0L3QuNGG0LAg0YEg0LLQuNC00LXQvlxuXHRcdHRoaXMuc3VicyA9IG5ldyBTdWJzKHRoaXMudXJsTWFwKTsgLy/QuNC90YHRgtCw0L3RgSDQutC70LDRgdGB0LAg0LTQu9GPINGA0LDQsdC+0YLRiyDRgSDRgdGD0LHRgtC40YLRgNCw0LzQuFxuXHRcdHRoaXMucGxheWVyID0gbmV3IFBsYXllcih0aGlzLmFwcEVsLnF1ZXJ5U2VsZWN0b3IoJy52aWRlby1jdXN0b20nKSwgdGhpcy51cmxNYXAudmlkZW9VcmwsIHRoaXMuc3Vicyk7IC8v0LjQvdGB0YLQsNC90YEg0L/Qu9C10LXRgNCwINC00LvRjyDQv9GA0L7QuNCz0YDRi9Cy0LDQvdC40Y8g0LfQsNCz0YDRg9C20LXQvdC90L7Qs9C+INCy0LjQtNC10L5cblx0XHR0aGlzLm92ZXJsYXlQbGF5ZXIgPSBuZXcgUGxheWVyKHRoaXMuYXBwRWwucXVlcnlTZWxlY3RvcignLnZpZGVvLW92ZXJsYXknKSwgb3ZlcmxheVZpZGVvVXJsLCB0aGlzLnN1YnMpOyAvL9C40L3RgdGC0LDQvdGBINC/0LvQtdC10YDQsCDQtNC70Y8g0L/RgNC+0LjRgNGL0LLQsNC90LjRjyDQstC40LTQtdC+INGBINGN0YTRhNC10LrRgtC+0Lwg0YHRgtCw0YDQuNC90Ytcblx0XHR0aGlzLmF1ZGlvID0gbmV3IEF1ZGlvKHRoaXMuYXBwRWwucXVlcnlTZWxlY3RvcignLmF1ZGlvJyksIHRoaXMudXJsTWFwLmF1ZGlvVXJsKTsgLy/QuNC90YHRgtCw0L3RgSDQtNC70Y8g0YDQsNCx0L7RgtGLINGBINCw0YPQtNC40L5cblx0XHR0aGlzLmNhbnZhcyA9IG5ldyBDYW52YXModGhpcy5hcHBFbC5xdWVyeVNlbGVjdG9yKCcuY2FudmFzJyksIHRoaXMucGxheWVyLCB0aGlzLm92ZXJsYXlQbGF5ZXIsIHRoaXMuc3VicywgdGhpcy5vdmVybGF5Q2FudmFzLCB0aGlzLmF1ZGlvKTtcblx0fTtcbn07XG5cblxuLyrQutC70LDRgdGBINC00LvRjyDQuNC90LjRhtC40LDQu9C40LfQsNGG0LjQuCDQstC40LTQtdC+0L/Qu9C10LXRgNCwKi9cbmNsYXNzIFBsYXllciB7XG5cdGNvbnN0cnVjdG9yKGVsLCB1cmwsIHN1YnMpIHtcblx0XHR0aGlzLnBsYXllckVsID0gZWw7XG5cdFx0dGhpcy52aWRlb1VybCA9IHVybDtcblx0XHR0aGlzLmlzUGxheWluZyA9IGZhbHNlO1xuXHRcdHRoaXMud2lkdGggPSA2NDA7IC8v0YjQuNGA0LjQvdCwINCy0LjQtNC10L5cblx0XHR0aGlzLmhlaWdodCA9IDM2MDsgLy/QstGL0YHQvtGC0LAg0LLQuNC00LXQvlxuXHRcdHRoaXMucGxheWVyRWwud2lkdGggPSB0aGlzLndpZHRoO1xuXHRcdHRoaXMucGxheWVyRWwuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG5cdFx0dGhpcy52aWRlb1NvdXJjZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc291cmNlJyk7IC8v0YHQvtC30LTQsNGC0Ywg0Y3Qu9C10LzQtdC90YIgPHNvdXJjZT5cblx0XHR0aGlzLnZpZGVvU291cmNlRWwuc2V0QXR0cmlidXRlKCdzcmMnLCB0aGlzLnZpZGVvVXJsKTsgLy/Rg9GB0YLQsNC90L7QstC40YLRjCDQuNGB0YLQvtGH0L3QuNC6XG5cdFx0dGhpcy5wbGF5ZXJFbC5hcHBlbmRDaGlsZCh0aGlzLnZpZGVvU291cmNlRWwpOyAvL9C00L7QsdCw0LLQuNGC0YwgPHNvdXJjZT4g0LLQvdGD0YLRgNGMIDx2aWRlbz5cblx0fTtcblxuXHRwbGF5KCkge1xuXHRcdHRoaXMucGxheWVyRWwucGxheSgpOyAvL9Cy0L7RgdC/0YDQvtC40LfQstC10LTQtdC90LjQtSDQstC40LTQtdC+XG5cdH07XG5cblx0cGF1c2UoKSB7XG5cdFx0dGhpcy5wbGF5ZXJFbC5wYXVzZSgpOyAvL9C/0LDRg9C30LBcblx0fTtcbn07XG5cbi8q0LrQu9Cw0YHRgSDQtNC70Y8g0LjQvdC40YbQuNCw0LvQuNC30LDRhtC40Lgg0LrQsNC90LLQsNGB0LAqL1xuY2xhc3MgQ2FudmFzIHtcblx0Y29uc3RydWN0b3IoZWwsIHBsYXllciwgb3ZlcmxheVBsYXllciwgc3Vicywgb3ZlcmxheUNhbnZhcywgYXVkaW8pIHtcblx0XHR0aGlzLmNhbnZhc0VsID0gZWw7IC8v0YPQt9C10LsgPGNhbnZhcz4g0L3QsCDQutC+0YLQvtGA0L7QvCDQsdGD0LTQtdC8INGA0LjRgdC+0LLQsNGC0Yxcblx0XHR0aGlzLm92ZXJsYXlDYW52YXMgPSBvdmVybGF5Q2FudmFzOyAvLyDRg9C30LrQuyA8Y2FudmFzPiDQtNC70Y8g0L7RgtGA0LjRgdC+0LLQutC4INGN0YTQtdC10LrRgtCwINGB0YLQsNGA0LjQvdGLXG5cdFx0dGhpcy5wbGF5ZXIgPSBwbGF5ZXI7IC8v0L/Qu9C10LXRgCDQtNC70Y8g0L/RgNC+0LjQs9GA0YvQstCw0L3QuNGPINC30LDQs9GA0YPQttC10L3QvdC+0LPQviDQstC40LTQtdC+XG5cdFx0dGhpcy5vdmVybGF5UGxheWVyID0gb3ZlcmxheVBsYXllcjsgLy/Qv9C70LXQtdGAINC00LvRjyDQv9GA0L7QuNCz0YDRi9Cy0LDQvdC40Y8g0LLQuNC00LXQviDRgSDRjdGE0YTQtdC60YLQvtC8XG5cdFx0dGhpcy5zdWJzID0gc3ViczsgLy/QvtCx0YrQtdC60YIg0YEg0YDQsNGB0L/QsNGA0YHQtdC90L3Ri9C80Lgg0YHRg9Cx0YLQuNGC0YDQsNC80Lhcblx0XHR0aGlzLmF1ZGlvID0gYXVkaW87IC8v0LDRg9C00LjQvtC/0LvQtdC10YBcblx0XHR0aGlzLm92ZXJsYXlDYW52YXNDb250ZXh0ID0gdGhpcy5vdmVybGF5Q2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblx0XHR0aGlzLnN1YnNDdXJy0KF1ZSA9IDA7IC8v0L/QvtC30LjRhtC40Y8g0YLQtdC60YPRidC10Lkg0YDQtdC/0LvQuNC60Lgg0LIg0YHRg9Cx0YLQuNGC0YDQsNGFLCDQvNC10L3Rj9GP0LXRgtGB0Y8g0L/QvtGB0LvQtSDQv9C+0LrQsNC30LAg0LrQsNC20LTQvtC5INGE0YDQsNC30Ytcblx0XHR0aGlzLmNvbnRleHQgPSB0aGlzLmNhbnZhc0VsLmdldENvbnRleHQoXCIyZFwiKTtcblx0XHR0aGlzLmNhbnZhc0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fb25DYW52YXNDbGljay5iaW5kKHRoaXMpKTsgLy/QstC+0YHQv9GA0L7QuNC30LLQtdC00LXQvdC40LUv0L/QsNGD0LfQsCDQv9C+INC60LvQuNC60YNcblx0XHR0aGlzLmNhbnZhc0VsLndpZHRoID0gdGhpcy5wbGF5ZXIud2lkdGg7IC8v0YDQsNC30LzQtdGA0Ysg0LrQsNC90LLQsNGB0LAg0LTQu9GPINGA0LDQstC90Ysg0YDQsNC30LzQtdGA0YMg0LLQuNC00LXQvtC/0LvQtdC10YDQsFxuXHRcdHRoaXMuY2FudmFzRWwuaGVpZ2h0ID0gdGhpcy5wbGF5ZXIuaGVpZ2h0O1xuXHRcdHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSAncmdiKDMwLCAzMCwgMzApJztcblx0XHR0aGlzLmNvbnRleHQuZmlsbFJlY3QoMCwgMCwgdGhpcy5jYW52YXNFbC53aWR0aCwgdGhpcy5jYW52YXNFbC5oZWlnaHQpO1xuXHR9O1xuXG5cdC8q0LLQvtGB0L/RgNC+0LjQt9Cy0LXQtNC10L3QuNC1L9C/0LDRg9C30LAqL1xuXHRfb25DYW52YXNDbGljayhlKSB7XG5cdFx0aWYgKHRoaXMucGxheWVyLmlzUGxheWluZykge1xuXHRcdFx0dGhpcy5wbGF5ZXIucGF1c2UoKTsgLy/QvtGB0YLQsNC90LDQstC70LjQstCw0LXQvCDQv9C70LXQtdGAINGBINC30LDQs9GA0YPQttC10L3QvdGL0Lwg0LLQuNC00LXQviDQuCDQstC40LTQtdC+INGBINGN0YTRhNC10LrRgtC+0Lxcblx0XHRcdHRoaXMub3ZlcmxheVBsYXllci5wYXVzZSgpO1xuXHRcdFx0dGhpcy5hdWRpby5wYXVzZSgpO1xuXHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMudDEpOyAvL9C+0YfQuNGJ0LDQtdC8INC40L3RgtC10YDQstCw0LvRiyDQv9C+0LrQsNC30LAg0YHRg9Cx0YLQuNGC0YDQvtCyXG5cdFx0XHRjbGVhclRpbWVvdXQodGhpcy50Mik7XG5cdFx0XHRjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnRleHRSZXEpOyAvL9C+0YfQuNGJ0LDQtdC8IGZyYW1lIHJlcXVlc3TRiyDQvtGC0YDQuNGB0L7QstGL0LLQsNGO0YnQuNC1INGC0LXQutGB0YIg0Lgg0LjQt9C+0LHRgNCw0LbQtdC90LjQtVxuXHRcdFx0Y2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy52aWRlb1JlcSk7XG5cdFx0XHR0aGlzLnBsYXllci5pc1BsYXlpbmcgPSAhdGhpcy5wbGF5ZXIuaXNQbGF5aW5nO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAodGhpcy5jaGVja1N1YnNBdmFpbGFiaWxpdHkoZSkgPT09IGZhbHNlKSB7IC8v0L/RgNC+0LLQtdGA0Y/QtdC8INC00L7RgdGC0YPQv9C90Ysg0LvQuCDRgdGD0LHRgtC40YLRgNGLXG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH07XG5cdFx0XHR0aGlzLnN1YnMucGFyc2VkU3VicyA9IHRoaXMuZ2V0TmVlZGVkU3Vic0ZvclRoaXNUaW1lKCk7IC8v0YTQuNC70YzRgtGA0YPQtdC8INC80LDRgdC40LIg0YEg0YHRg9Cx0YLQuNGC0YDQsNC80Lgg0LIg0YHQvtC+0YLQstC10YLRgdGP0LLQuNC4INGBINGC0LXQutGD0YnQuNC8INCy0YDQtdC80LXQvdC10Lwg0L/RgNC+0LjQs9GA0YvQstCw0L3QuNGPXG5cdFx0XHR0aGlzLnN1YnNDdXJy0KF1ZSA9IDA7IC8v0L3QsNGH0LjQvdCw0LXQvCDRgSDQv9C10YDQstC+0Lkg0YDQtdC/0LvQuNC60Lhcblx0XHRcdHRoaXMucGxheWVyLnBsYXkoKTtcblx0XHRcdHRoaXMub3ZlcmxheVBsYXllci5wbGF5KCk7XG5cdFx0XHR0aGlzLmF1ZGlvLnBsYXkoKTtcblx0XHRcdHRoaXMuc3RhcnRUaW1l0KFvdW50dXAoKTsgLy/QvdCw0YfQuNC90LDQtdC8INCy0YvRh9C40YHQu9GP0YLRjCDQstGA0LXQvNGPINC00L4g0L/QvtC60LDQt9CwINGB0YPQsdGC0LjRgtGA0L7QslxuXHRcdFx0Y2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy50ZXh0UmVxKTtcblx0XHRcdHRoaXMudmlkZW9SZXEgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy53YXRjaFRoZVZpZGVvLmJpbmQodGhpcykpOyAvL9C+0YLRgNC40YHQvtCy0YvQstCw0LXQvCDQutCw0LTRgFxuXHRcdFx0dGhpcy5wbGF5ZXIuaXNQbGF5aW5nID0gIXRoaXMucGxheWVyLmlzUGxheWluZztcblx0XHR9O1xuXHR9O1xuXG5cdC8q0YTRg9C90LrRhtC40Y8g0LTQu9GPINGE0LjQu9GM0YLRgNCw0YbQuNC4INGB0YPQsdGC0LjRgtGA0L7QsiDQv9GA0Lgg0LLQvtGB0L/RgNC+0LjQt9Cy0LXQtNC10L3QuNC4INC/0L7RgdC70LUg0L/QsNGD0LfRiyDQuNC70Lgg0L/QtdGA0LXQvNC+0YLQutC4Ki9cblx0Z2V0TmVlZGVkU3Vic0ZvclRoaXNUaW1lKCkge1xuXHRcdGxldCBjdXJyZW50VGltZSA9IHBhcnNlSW50KHRoaXMucGxheWVyLnBsYXllckVsLmN1cnJlbnRUaW1lICogMTAwMCk7XG5cdFx0bGV0IGZpbHRlcmVkU3VicyA9IHRoaXMuc3Vicy5wYXJzZWRTdWJzLmZpbHRlcihpdGVtID0+IHtcblx0XHRcdGlmIChpdGVtLmVuZFRpbWUgPj0gY3VycmVudFRpbWUpIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9O1xuXHRcdH0pO1xuXHRcdHJldHVybiBmaWx0ZXJlZFN1YnM7IC8v0LLQvtC30LLRgtGA0LDRidCw0LXQvCDQvNCw0YHRgdC40LIg0YEg0YDQtdC/0LvQuNC60LDQvNC4INC90LDRh9C40L3QsNGPINGBINCx0LvQuNC20LDQudGI0LXQuVxuXHR9O1xuXG5cdC8q0L/RgNC+0LTQvtC70LbQsNC10Lwg0LLQvtGB0L/RgNC+0LjQt9Cy0LXQtNC10L3QuNC1INCy0LjQtNC10L4sINC/0L7RgdC70LUg0L/QvtC60LDQt9CwINGB0YPQsdGC0LjRgtGA0L7QsiovXG5cdHJlc3VtZVBsYXlBZnRlclN1YnMoKSB7XG5cdFx0dGhpcy5wbGF5ZXIucGxheSgpO1xuXHRcdHRoaXMuc3RhcnRUaW1l0KFvdW50dXAoKTtcblx0XHRjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnRleHRSZXEpO1xuXHRcdHRoaXMudmlkZW9SZXEgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy53YXRjaFRoZVZpZGVvLmJpbmQodGhpcykpO1xuXHR9O1xuXG5cdHN0YXJ0VGltZdChb3VudHVwKCkge1xuXHRcdC8q0LLRi9GH0LjRgdC70Y/QtdC8INCy0YDQtdC80Y8g0LTQviDQvdCw0YfQsNC70LAg0L/QvtC60LDQt9CwINGB0YPQsdGC0LjRgtGA0L7QsiovXG5cdFx0bGV0IGRlbGF5VG9TdGFydE9mU3VicyA9IHRoaXMuc3Vicy5wYXJzZWRTdWJzW3RoaXMuc3Vic0N1cnLQoXVlXS5lbmRUaW1lIC0gKHBhcnNlSW50KHRoaXMucGxheWVyLnBsYXllckVsLmN1cnJlbnRUaW1lKSAqIDEwMDApO1xuXHRcdC8q0LLRi9GH0LjRgdC70Y/QtdC8INCy0YDQtdC80Y8g0L/QvtC60LDQt9CwKi9cblx0XHRsZXQgcGF1c2VEdXJhdGlvbiA9IHRoaXMuc3Vicy5wYXJzZWRTdWJzW3RoaXMuc3Vic0N1cnLQoXVlXS5lbmRUaW1lIC0gdGhpcy5zdWJzLnBhcnNlZFN1YnNbdGhpcy5zdWJzQ3VyctChdWVdLnN0YXJ0VGltZTtcblxuXHRcdC8q0LbQtNC10Lwg0L/QvtC60LAg0L/RgNC40LnQtNC10YIg0LLRgNC10LzRjyDQv9C+0LrQsNC30LDRgtGMINGB0YPQsdGC0LjRgtGA0YsqL1xuXHRcdHRoaXMudDEgPSBzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdHRoaXMucGxheWVyLnBhdXNlKCk7XG5cdFx0XHRjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnZpZGVvUmVxKTtcblx0XHRcdC8v0YDQuNGB0YPQtdC8INGB0YPQsdGC0LjRgtGA0Ytcblx0XHRcdHRoaXMudGV4dFJlcSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmRyb3dUZXh0LmJpbmQodGhpcykpO1xuXHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMudDEpO1xuXG5cdFx0XHQvKtC20LTQtdC8INC/0L7QutCwINC/0YDQuNC50LTQtdGCINCy0YDQtdC80Y8g0L/RgNC+0LTQvtC70LbQuNGC0Ywg0LLQvtGB0L/RgNC+0LjQt9Cy0LXQtNC10L3QuNC1Ki9cblx0XHRcdHRoaXMudDIgPSBzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0LyrQv9GA0L7QstC10YDRj9C10Lwg0L3QtSDQt9Cw0LrQvtC90YfQuNC70LjRgdGMINC70Lgg0YHRg9Cx0YLQuNGC0YDRiyovXG5cdFx0XHRcdGlmICh0aGlzLnN1YnNDdXJy0KF1ZSA8ICh0aGlzLnN1YnMucGFyc2VkU3Vicy5sZW5ndGggLSAxKSkge1xuXHRcdFx0XHRcdHRoaXMuc3Vic0N1cnLQoXVlKys7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5zdWJzQ3VyctChdWUgPSAwO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMucmVzdW1lUGxheUFmdGVyU3VicygpO1xuXHRcdFx0XHRjbGVhclRpbWVvdXQodGhpcy50Mik7XG5cdFx0XHR9LCBwYXVzZUR1cmF0aW9uKTtcblx0XHR9LCBkZWxheVRvU3RhcnRPZlN1YnMpO1xuXHR9O1xuXG5cdC8v0YDQuNGB0YPQtdC8INC60LDQtNGAINGBINC/0LXRgNC10L7QtNC40YfQvdC+0YHRgtGM0Y4g0LrQsNC00YDQvtCyINCyINGB0LXQulxuXHR3YXRjaFRoZVZpZGVvKCkge1xuXHRcdHRoaXMucGFpbnRGcmFtZSgpO1xuXHRcdGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMudGV4dFJlcSk7XG5cdFx0dGhpcy52aWRlb1JlcSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLndhdGNoVGhlVmlkZW8uYmluZCh0aGlzKSk7XG5cdH07XG5cblx0Ly/RhNGD0L3QutGG0LjRjyDQvtGC0YDQuNGB0L7QstC60Lgg0LrQsNC00YDQsCDRgSDRjdGE0YTQtdC60YLQvtC8IGdyYXlzY2FsZVxuXHRwYWludEZyYW1lKCkge1xuXHRcdHRoaXMuY29udGV4dC5kcmF3SW1hZ2UodGhpcy5wbGF5ZXIucGxheWVyRWwsIDAsIDAsIHRoaXMucGxheWVyLndpZHRoLCB0aGlzLnBsYXllci5oZWlnaHQpO1xuXHRcdC8v0YDQtdC20LjQvCDQvdCw0LvQvtC20LXQvdC40Y8g0L/QvtC30LLQvtC70Y/QtdGCINC00L7QsdC40YLRgdGPINGH0LXRgNC90L4t0LHQtdC70L7QuSDQutCw0YDRgtC40L3QutC4XG5cdFx0dGhpcy5jb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdjb2xvcic7XG5cdFx0dGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9ICdyZ2IoMjU1LCAyNTUsIDI1NSknO1xuXHRcdHRoaXMuY29udGV4dC5maWxsUmVjdCgwLCAwLCB0aGlzLmNhbnZhc0VsLndpZHRoLCB0aGlzLmNhbnZhc0VsLmhlaWdodCk7XG5cdFx0Ly/RgNC40YHRg9C10Lwg0Y3RhNGE0LXQutGCINGB0YLQsNGA0LjQvdGLXG5cdFx0dGhpcy5wYWludE92ZXJsYXlFZmZlY3QoKTtcblx0fTtcblxuXHRwYWludE92ZXJsYXlFZmZlY3QoKSB7XG5cdFx0Ly/QsdC10YDQtdC8INC40LfQvtCx0YDQsNC20LXQvdC40LjQtSDQuNC3INC/0LvQtdC10YDQsCDQtNC70Y8g0LLQuNC00LXQviDRgSDRjdGE0YTQtdC60YLQvtC8INGB0YLQsNGA0LjQvdGLINCyINC60LDQvdCy0LDRgSDQtNC70Y8g0L7RgtGA0LjRgdCy0L7QutC4INGN0YTRhNC10LrRgtCwXG5cdFx0dGhpcy5vdmVybGF5Q2FudmFzQ29udGV4dC5kcmF3SW1hZ2UodGhpcy5vdmVybGF5UGxheWVyLnBsYXllckVsLCAwLCAwLCB0aGlzLm92ZXJsYXlQbGF5ZXIud2lkdGgsIHRoaXMub3ZlcmxheVBsYXllci5oZWlnaHQpO1xuXHRcdGxldCBpbWFnZURhdGEgPSB0aGlzLm92ZXJsYXlDYW52YXNDb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCB0aGlzLmNhbnZhc0VsLndpZHRoLCB0aGlzLmNhbnZhc0VsLmhlaWdodCk7XG5cdFx0dGhpcy5vdmVybGF5Q2FudmFzQ29udGV4dC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKTtcblx0XHR0aGlzLmNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ211bHRpcGx5Jztcblx0XHQvL9C+0YLRgNC40YHQvtCy0YvQstCw0LXQvCDRjdGE0YTQtdC60YIg0YEg0YDQtdC20LjQvNC+0Lwg0L3QsNC70L7QttC10L3QuNGPIG11bHRpcGx5XG5cdFx0dGhpcy5jb250ZXh0LmRyYXdJbWFnZSh0aGlzLm92ZXJsYXlDYW52YXMsIDAsIDAsIHRoaXMuY2FudmFzRWwud2lkdGgsIHRoaXMuY2FudmFzRWwuaGVpZ2h0KTtcblx0XHR0aGlzLmNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJztcblx0fTtcblxuXHQvL9GE0YPQvdC60YbQuNGPINC00LvRjyDQvtGC0YDQuNGB0L7QstC60Lgg0YHRg9Cx0YLQuNGC0YDQvtCyXG5cdGRyb3dUZXh0KHRleHQpIHtcblx0XHR0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gJ3JnYig1MCwgNTAsIDUwKSc7XG5cdFx0Ly/RhNC+0L1cblx0XHR0aGlzLmNvbnRleHQuZmlsbFJlY3QoMCwgMCwgdGhpcy5jYW52YXNFbC53aWR0aCwgdGhpcy5jYW52YXNFbC5oZWlnaHQpO1xuXHRcdHRoaXMuY29udGV4dC5mb250ID0gJzM2cHggT3JhbmllbmJhdW0nO1xuXHRcdHRoaXMuY29udGV4dC50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xuXHRcdHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSAncmdiKDI1NSwgMjU1LCAyNTUpJztcblx0XHQvL9C00LXQu9Cw0LXQvCDQv9C10YDQtdC90L7RgdGLINC/0L4g0YHQu9C+0LLQsNC8XG5cdFx0dGhpcy53cmFwVGV4dCh0aGlzLnN1YnMucGFyc2VkU3Vic1t0aGlzLnN1YnNDdXJy0KF1ZV0udGV4dCwgdGhpcy5jYW52YXNFbC53aWR0aCwgNDAsIHRoaXMuY2FudmFzRWwud2lkdGggLyAyLCB0aGlzLmNhbnZhc0VsLmhlaWdodCAvIDIpO1xuXHRcdC8v0L3QsNC60LvQsNC00YvQstCw0LXQvCDRjdGE0YTQtdC60YIg0YHRgtCw0YDQuNC90Ytcblx0XHR0aGlzLnBhaW50T3ZlcmxheUVmZmVjdCgpO1xuXHRcdGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMudmlkZW9SZXEpO1xuXHRcdHRoaXMudGV4dFJlcSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmRyb3dUZXh0LmJpbmQodGhpcykpO1xuXHR9O1xuXG5cdC8v0L/QtdGA0LXQvdC+0YEg0YHRg9Cx0YLQuNGC0YDQvtCyINC/0L4g0YHQu9C+0LLQsNC8XG5cdHdyYXBUZXh0KHRleHQsIG1heFdpZHRoLCBsaW5lSGVpZ2h0LCBtYXJnaW5MZWZ0LCBtYXJnaW5Ub3ApIHtcblx0XHRsZXQgd29yZHMgPSB0ZXh0LnNwbGl0KFwiIFwiKTtcblx0XHRsZXQgbGluZSA9IFwiXCI7XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB3b3Jkcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0bGV0IHRlbXBvcmFyeVRleHRMaW5lID0gbGluZSArIHdvcmRzW2ldICsgXCIgXCI7XG5cdFx0XHQvL9C/0L7Qu9GD0YfQsNC10Lwg0YjQuNGA0LjQvdGDINC70LjQvdC40Lgg0YLQtdC60YHRgtCwXG5cdFx0XHRsZXQgdGVtcG9yYXJ5VGV4dExpbmVXaWR0aCA9IHRoaXMuY29udGV4dC5tZWFzdXJlVGV4dCh0ZW1wb3JhcnlUZXh0TGluZSkud2lkdGg7XG5cdFx0XHQvL9C/0YDQvtCy0LXRgNGP0LXQvCDQstC70LDQt9C40YIg0LvQuCDQsiDQutCw0L3QstCw0YFcblx0XHRcdGlmICh0ZW1wb3JhcnlUZXh0TGluZVdpZHRoID4gKG1heFdpZHRoIC0gNTApKSB7XG5cdFx0XHRcdHRoaXMuY29udGV4dC5maWxsVGV4dChsaW5lLCBtYXJnaW5MZWZ0LCBtYXJnaW5Ub3ApO1xuXHRcdFx0XHRsaW5lID0gd29yZHNbaV0gKyBcIiBcIjtcblx0XHRcdFx0bWFyZ2luVG9wICs9IGxpbmVIZWlnaHQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRsaW5lID0gdGVtcG9yYXJ5VGV4dExpbmU7XG5cdFx0XHR9O1xuXHRcdH07XG5cdFx0dGhpcy5jb250ZXh0LmZpbGxUZXh0KGxpbmUsIG1hcmdpbkxlZnQsIG1hcmdpblRvcCk7XG5cdH07XG5cblx0Ly/Qv9GA0L7QstC10YDQutCwINC00L7RgdGC0YPQv9C90L7RgdGC0Lgg0YHRg9Cx0YLQuNGC0YDQvtCyXG5cdGNoZWNrU3Vic0F2YWlsYWJpbGl0eShlKSB7XG5cdFx0Ly/RhNC70LDQsyDRg9GB0YLQsNC90LDQstC70LjQstCw0LXRgtGB0Y8g0LXRgdC70Lgg0YHRg9Cx0YLQuNGC0YDRiyDQsdGL0LvQuCDRg9GB0L/QtdGI0L3QviDQt9Cw0LPRgNGD0LbQtdC90Ytcblx0XHRpZiAoIXRoaXMuc3Vicy5yZWFkeSkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0dGhpcy5wbGF5ZXIucGF1c2UoKTtcblx0XHRcdHRoaXMucGxheWVyLnBsYXllckVsLmN1cnJlbnRUaW1lID0gMDtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9O1xuXHR9O1xufTtcblxuY2xhc3MgU3VicyB7XG5cdGNvbnN0cnVjdG9yKHVybE1hcCkge1xuXHRcdHRoaXMucmVhZHkgPSBmYWxzZTtcblx0XHQvL9C/0L7Qu9GD0YfQsNC10Lwg0YHRg9Cx0YLQuNGC0YDRiyDQv9C+IHVybFxuXHRcdGZldGNoKHVybE1hcC5zdWJzVXJsKVxuXHRcdFx0LnRoZW4ocmVzID0+IHtcblx0XHRcdFx0Ly/Qv9Cw0YDRgdC40Lwg0YHRg9Cx0YLQuNGC0YDRiyDQsiDRgtC10LrRgdGCXG5cdFx0XHRcdHJlcy50ZXh0KClcblx0XHRcdFx0XHQudGhlbihkYXRhID0+IHtcblx0XHRcdFx0XHRcdC8v0L/QsNGA0YHQuNC8INGB0YPQsdGC0LjRgtGA0Ysg0LIganNcblx0XHRcdFx0XHRcdHRoaXMucGFyc2VkU3VicyA9IHRoaXMucGFyc2VGcm9tU3J0KGRhdGEpO1xuXHRcdFx0XHRcdFx0dGhpcy5yZWFkeSA9IHRydWU7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0fTtcblxuXHQvL9C/0LDRgNGB0LjQvCDRgdGD0LHRgtC40YLRgNGLXG5cdHBhcnNlRnJvbVNydChzcnQpIHtcblx0XHQvL9C40Lcg0YLQtdC60YHRgtCwINCyIGpzLCDQvdCw0LPQu9C+LCDQv9GA0Lgg0L/QvtC80L7RidC4INCx0LjQsdC70LjQvtGC0LXQutC4IHN1YnRpdGxlLXBhcnNlclxuXHRcdGxldCBwYXJzZWRTdWJzID0gcGFyc2VyLmZyb21TcnQoc3J0KTtcblx0XHQvL9C/0YDQuNCy0L7QtNC40Lwg0LLRgNC10LzRjyDQuiDRhNC+0YDQvNCw0YLRgyDQvNC40LvQuNGB0LXQutGD0L3QtFxuXHRcdHBhcnNlZFN1YnMubWFwKGl0ZW0gPT4ge1xuXHRcdFx0dGltZVBhcnNlVG9NcygnZW5kVGltZScsIGl0ZW0pO1xuXHRcdFx0dGltZVBhcnNlVG9Ncygnc3RhcnRUaW1lJywgaXRlbSk7XG5cdFx0fSk7XG5cblx0XHRmdW5jdGlvbiB0aW1lUGFyc2VUb01zKHRpbWVUeXBlLCBpdGVtKSB7XG5cdFx0XHRsZXQgc3Vic1N0YXJ0VGltZUJ1ZmZlciA9IGl0ZW1bdGltZVR5cGVdLnNwbGl0KCc6Jyk7XG5cdFx0XHRsZXQgaG91cnMgPSBzdWJzU3RhcnRUaW1lQnVmZmVyWzBdO1xuXHRcdFx0bGV0IG1pbnMgPSBOdW1iZXIoc3Vic1N0YXJ0VGltZUJ1ZmZlclsxXSk7XG5cdFx0XHRsZXQgc2Vjc0FuZE1zZWNzQnVmZmVyID0gc3Vic1N0YXJ0VGltZUJ1ZmZlclsyXS5zcGxpdCgnLCcpO1xuXHRcdFx0bGV0IHNlY3MgPSBOdW1iZXIoc2Vjc0FuZE1zZWNzQnVmZmVyWzBdKTtcblx0XHRcdGxldCBtc2VjcyA9IE51bWJlcihzZWNzQW5kTXNlY3NCdWZmZXJbMV0pO1xuXHRcdFx0aXRlbVt0aW1lVHlwZV0gPSBob3VycyAqIDM2MDAwMDAgKyBtaW5zICogNjAwMDAgKyBzZWNzICogMTAwMCArIG1zZWNzO1xuXHRcdH07XG5cdFx0cmV0dXJuIHBhcnNlZFN1YnM7XG5cdH07XG59O1xuXG5jbGFzcyBBdWRpbyB7XG5cdGNvbnN0cnVjdG9yKGVsLCB1cmwpIHtcblx0XHR0aGlzLmF1ZGlvRWwgPSBlbDtcblx0XHR0aGlzLnVybCA9IHVybDtcblx0XHR0aGlzLmF1ZGlvU291cmNlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzb3VyY2UnKTtcblx0XHR0aGlzLmF1ZGlvU291cmNlRWwuc2V0QXR0cmlidXRlKCdzcmMnLCB0aGlzLnVybCk7XG5cdFx0dGhpcy5hdWRpb0VsLmFwcGVuZENoaWxkKHRoaXMuYXVkaW9Tb3VyY2VFbCk7XG5cdH07XG5cdHBsYXkoKSB7XG5cdFx0dGhpcy5hdWRpb0VsLnBsYXkoKTtcblx0fTtcblx0cGF1c2UoKSB7XG5cdFx0dGhpcy5hdWRpb0VsLnBhdXNlKCk7XG5cdH07XG59O1xuXG5jb25zdCBhcHAgPSBuZXcgQXBwKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hcHAnKSk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8q0LrQu9Cw0YHRgSDQv9GA0LjQu9C+0LbQtdC90LjRjyovXG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBBcHAgPSBmdW5jdGlvbiAoKSB7XG5cdGZ1bmN0aW9uIEFwcChlbCkge1xuXHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBcHApO1xuXG5cdFx0dGhpcy5hcHBFbCA9IGVsO1xuXHRcdHRoaXMuZm9ybSA9IHRoaXMuYXBwRWwucXVlcnlTZWxlY3RvcignLnNvdXJjZS1saW5rcy1mb3JtJyk7XG5cdFx0dGhpcy5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuX29uU291cmNlTGlua3NGb3JtU3VibWl0LmJpbmQodGhpcykpO1xuXHR9XG5cblx0X2NyZWF0ZUNsYXNzKEFwcCwgW3tcblx0XHRrZXk6ICdfb25Tb3VyY2VMaW5rc0Zvcm1TdWJtaXQnLFxuXG5cblx0XHQvKtC+0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPINC+0YLQv9GA0LDQstC60Lgg0YTQvtGA0LzRiy4g0KHQvtCx0LjRgNCw0LXRgiDQtNCw0L3QvdGL0LUg0LjQtyDQv9C+0LvQtSDQuCDQvtGB0YPRidC10YHRgtCy0LvRj9C10YIg0LjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y4g0Y3Qu9C10LzQtdC90YLQvtCyINCy0YLQvtGA0L7QuSDRgdGC0YDQsNC90LjRhtGLKi9cblx0XHR2YWx1ZTogZnVuY3Rpb24gX29uU291cmNlTGlua3NGb3JtU3VibWl0KGUpIHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdHZhciBvdmVybGF5VmlkZW9VcmwgPSAnLi9hc3NldHMvdmlkZW8vb3ZlcmxheS5tcDQnOyAvL9Cy0LjQtNC10L4g0LTQu9GPINGB0L7Qt9C00LDQvdC40Y8g0Y3RhNGE0LXQutGC0LAg0YHRgtCw0YDQuNC90Ytcblx0XHRcdHRoaXMub3ZlcmxheUNhbnZhcyA9IHRoaXMuYXBwRWwucXVlcnlTZWxlY3RvcignLmNhbnZhcy1vdmVybGF5Jyk7IC8v0YPQt9C10Lsg0LrQsNC90LLQsNGB0LAg0LTQu9GPINC+0YLRgNC40YHQvtCy0LrQuCDRjdGE0LXQutGC0LAg0YHRgtCw0YDQuNC90YtcblxuXHRcdFx0LyrRg9GA0LvRiyDQstC40LTQtdC+LCDQsNGD0LTQuNC+INC4INGB0YPQsdGC0LjRgtGA0L7QsiDQstCy0LXQtNC10L3QvdGL0LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C10LwqL1xuXHRcdFx0dGhpcy51cmxNYXAgPSB7XG5cdFx0XHRcdHZpZGVvVXJsOiB0aGlzLmFwcEVsLnF1ZXJ5U2VsZWN0b3IoJyN2aWRlb1VybCcpLnZhbHVlLFxuXHRcdFx0XHRzdWJzVXJsOiB0aGlzLmFwcEVsLnF1ZXJ5U2VsZWN0b3IoJyNzdWJVcmwnKS52YWx1ZSxcblx0XHRcdFx0YXVkaW9Vcmw6IHRoaXMuYXBwRWwucXVlcnlTZWxlY3RvcignI2F1ZGlvVXJsJykudmFsdWVcblx0XHRcdH07XG5cdFx0XHR0aGlzLmFwcEVsLnF1ZXJ5U2VsZWN0b3IoJy5pbml0aWFsLXBhZ2UnKS5jbGFzc0xpc3QuYWRkKCdpbml0aWFsLXBhZ2VfaGlkZGVuJyk7IC8v0YHRgtGA0LDQvdC40YbQsCDRgSDRhNC+0YDQvNC+0Llcblx0XHRcdHRoaXMuYXBwRWwucXVlcnlTZWxlY3RvcignLnZpZGVvLXBhZ2UnKS5jbGFzc0xpc3QucmVtb3ZlKCd2aWRlby1wYWdlX2hpZGRlbicpOyAvL9GB0YLRgNCw0L3QuNGG0LAg0YEg0LLQuNC00LXQvlxuXHRcdFx0dGhpcy5zdWJzID0gbmV3IFN1YnModGhpcy51cmxNYXApOyAvL9C40L3RgdGC0LDQvdGBINC60LvQsNGB0YHQsCDQtNC70Y8g0YDQsNCx0L7RgtGLINGBINGB0YPQsdGC0LjRgtGA0LDQvNC4XG5cdFx0XHR0aGlzLnBsYXllciA9IG5ldyBQbGF5ZXIodGhpcy5hcHBFbC5xdWVyeVNlbGVjdG9yKCcudmlkZW8tY3VzdG9tJyksIHRoaXMudXJsTWFwLnZpZGVvVXJsLCB0aGlzLnN1YnMpOyAvL9C40L3RgdGC0LDQvdGBINC/0LvQtdC10YDQsCDQtNC70Y8g0L/RgNC+0LjQs9GA0YvQstCw0L3QuNGPINC30LDQs9GA0YPQttC10L3QvdC+0LPQviDQstC40LTQtdC+XG5cdFx0XHR0aGlzLm92ZXJsYXlQbGF5ZXIgPSBuZXcgUGxheWVyKHRoaXMuYXBwRWwucXVlcnlTZWxlY3RvcignLnZpZGVvLW92ZXJsYXknKSwgb3ZlcmxheVZpZGVvVXJsLCB0aGlzLnN1YnMpOyAvL9C40L3RgdGC0LDQvdGBINC/0LvQtdC10YDQsCDQtNC70Y8g0L/RgNC+0LjRgNGL0LLQsNC90LjRjyDQstC40LTQtdC+INGBINGN0YTRhNC10LrRgtC+0Lwg0YHRgtCw0YDQuNC90Ytcblx0XHRcdHRoaXMuYXVkaW8gPSBuZXcgQXVkaW8odGhpcy5hcHBFbC5xdWVyeVNlbGVjdG9yKCcuYXVkaW8nKSwgdGhpcy51cmxNYXAuYXVkaW9VcmwpOyAvL9C40L3RgdGC0LDQvdGBINC00LvRjyDRgNCw0LHQvtGC0Ysg0YEg0LDRg9C00LjQvlxuXHRcdFx0dGhpcy5jYW52YXMgPSBuZXcgQ2FudmFzKHRoaXMuYXBwRWwucXVlcnlTZWxlY3RvcignLmNhbnZhcycpLCB0aGlzLnBsYXllciwgdGhpcy5vdmVybGF5UGxheWVyLCB0aGlzLnN1YnMsIHRoaXMub3ZlcmxheUNhbnZhcywgdGhpcy5hdWRpbyk7XG5cdFx0fVxuXHR9XSk7XG5cblx0cmV0dXJuIEFwcDtcbn0oKTtcblxuO1xuXG4vKtC60LvQsNGB0YEg0LTQu9GPINC40L3QuNGG0LjQsNC70LjQt9Cw0YbQuNC4INCy0LjQtNC10L7Qv9C70LXQtdGA0LAqL1xuXG52YXIgUGxheWVyID0gZnVuY3Rpb24gKCkge1xuXHRmdW5jdGlvbiBQbGF5ZXIoZWwsIHVybCwgc3Vicykge1xuXHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQbGF5ZXIpO1xuXG5cdFx0dGhpcy5wbGF5ZXJFbCA9IGVsO1xuXHRcdHRoaXMudmlkZW9VcmwgPSB1cmw7XG5cdFx0dGhpcy5pc1BsYXlpbmcgPSBmYWxzZTtcblx0XHR0aGlzLndpZHRoID0gNjQwOyAvL9GI0LjRgNC40L3QsCDQstC40LTQtdC+XG5cdFx0dGhpcy5oZWlnaHQgPSAzNjA7IC8v0LLRi9GB0L7RgtCwINCy0LjQtNC10L5cblx0XHR0aGlzLnBsYXllckVsLndpZHRoID0gdGhpcy53aWR0aDtcblx0XHR0aGlzLnBsYXllckVsLmhlaWdodCA9IHRoaXMuaGVpZ2h0O1xuXHRcdHRoaXMudmlkZW9Tb3VyY2VFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NvdXJjZScpOyAvL9GB0L7Qt9C00LDRgtGMINGN0LvQtdC80LXQvdGCIDxzb3VyY2U+XG5cdFx0dGhpcy52aWRlb1NvdXJjZUVsLnNldEF0dHJpYnV0ZSgnc3JjJywgdGhpcy52aWRlb1VybCk7IC8v0YPRgdGC0LDQvdC+0LLQuNGC0Ywg0LjRgdGC0L7Rh9C90LjQulxuXHRcdHRoaXMucGxheWVyRWwuYXBwZW5kQ2hpbGQodGhpcy52aWRlb1NvdXJjZUVsKTsgLy/QtNC+0LHQsNCy0LjRgtGMIDxzb3VyY2U+INCy0L3Rg9GC0YDRjCA8dmlkZW8+XG5cdH1cblxuXHRfY3JlYXRlQ2xhc3MoUGxheWVyLCBbe1xuXHRcdGtleTogJ3BsYXknLFxuXHRcdHZhbHVlOiBmdW5jdGlvbiBwbGF5KCkge1xuXHRcdFx0dGhpcy5wbGF5ZXJFbC5wbGF5KCk7IC8v0LLQvtGB0L/RgNC+0LjQt9Cy0LXQtNC10L3QuNC1INCy0LjQtNC10L5cblx0XHR9XG5cdH0sIHtcblx0XHRrZXk6ICdwYXVzZScsXG5cdFx0dmFsdWU6IGZ1bmN0aW9uIHBhdXNlKCkge1xuXHRcdFx0dGhpcy5wbGF5ZXJFbC5wYXVzZSgpOyAvL9C/0LDRg9C30LBcblx0XHR9XG5cdH1dKTtcblxuXHRyZXR1cm4gUGxheWVyO1xufSgpO1xuXG47XG5cbi8q0LrQu9Cw0YHRgSDQtNC70Y8g0LjQvdC40YbQuNCw0LvQuNC30LDRhtC40Lgg0LrQsNC90LLQsNGB0LAqL1xuXG52YXIgQ2FudmFzID0gZnVuY3Rpb24gKCkge1xuXHRmdW5jdGlvbiBDYW52YXMoZWwsIHBsYXllciwgb3ZlcmxheVBsYXllciwgc3Vicywgb3ZlcmxheUNhbnZhcywgYXVkaW8pIHtcblx0XHRfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2FudmFzKTtcblxuXHRcdHRoaXMuY2FudmFzRWwgPSBlbDsgLy/Rg9C30LXQuyA8Y2FudmFzPiDQvdCwINC60L7RgtC+0YDQvtC8INCx0YPQtNC10Lwg0YDQuNGB0L7QstCw0YLRjFxuXHRcdHRoaXMub3ZlcmxheUNhbnZhcyA9IG92ZXJsYXlDYW52YXM7IC8vINGD0LfQutC7IDxjYW52YXM+INC00LvRjyDQvtGC0YDQuNGB0L7QstC60Lgg0Y3RhNC10LXQutGC0LAg0YHRgtCw0YDQuNC90Ytcblx0XHR0aGlzLnBsYXllciA9IHBsYXllcjsgLy/Qv9C70LXQtdGAINC00LvRjyDQv9GA0L7QuNCz0YDRi9Cy0LDQvdC40Y8g0LfQsNCz0YDRg9C20LXQvdC90L7Qs9C+INCy0LjQtNC10L5cblx0XHR0aGlzLm92ZXJsYXlQbGF5ZXIgPSBvdmVybGF5UGxheWVyOyAvL9C/0LvQtdC10YAg0LTQu9GPINC/0YDQvtC40LPRgNGL0LLQsNC90LjRjyDQstC40LTQtdC+INGBINGN0YTRhNC10LrRgtC+0Lxcblx0XHR0aGlzLnN1YnMgPSBzdWJzOyAvL9C+0LHRitC10LrRgiDRgSDRgNCw0YHQv9Cw0YDRgdC10L3QvdGL0LzQuCDRgdGD0LHRgtC40YLRgNCw0LzQuFxuXHRcdHRoaXMuYXVkaW8gPSBhdWRpbzsgLy/QsNGD0LTQuNC+0L/Qu9C10LXRgFxuXHRcdHRoaXMub3ZlcmxheUNhbnZhc0NvbnRleHQgPSB0aGlzLm92ZXJsYXlDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXHRcdHRoaXMuc3Vic0N1cnLQoXVlID0gMDsgLy/Qv9C+0LfQuNGG0LjRjyDRgtC10LrRg9GJ0LXQuSDRgNC10L/Qu9C40LrQuCDQsiDRgdGD0LHRgtC40YLRgNCw0YUsINC80LXQvdGP0Y/QtdGC0YHRjyDQv9C+0YHQu9C1INC/0L7QutCw0LfQsCDQutCw0LbQtNC+0Lkg0YTRgNCw0LfRi1xuXHRcdHRoaXMuY29udGV4dCA9IHRoaXMuY2FudmFzRWwuZ2V0Q29udGV4dChcIjJkXCIpO1xuXHRcdHRoaXMuY2FudmFzRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9vbkNhbnZhc0NsaWNrLmJpbmQodGhpcykpOyAvL9Cy0L7RgdC/0YDQvtC40LfQstC10LTQtdC90LjQtS/Qv9Cw0YPQt9CwINC/0L4g0LrQu9C40LrRg1xuXHRcdHRoaXMuY2FudmFzRWwud2lkdGggPSB0aGlzLnBsYXllci53aWR0aDsgLy/RgNCw0LfQvNC10YDRiyDQutCw0L3QstCw0YHQsCDQtNC70Y8g0YDQsNCy0L3RiyDRgNCw0LfQvNC10YDRgyDQstC40LTQtdC+0L/Qu9C10LXRgNCwXG5cdFx0dGhpcy5jYW52YXNFbC5oZWlnaHQgPSB0aGlzLnBsYXllci5oZWlnaHQ7XG5cdFx0dGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9ICdyZ2IoMzAsIDMwLCAzMCknO1xuXHRcdHRoaXMuY29udGV4dC5maWxsUmVjdCgwLCAwLCB0aGlzLmNhbnZhc0VsLndpZHRoLCB0aGlzLmNhbnZhc0VsLmhlaWdodCk7XG5cdH1cblxuXHRfY3JlYXRlQ2xhc3MoQ2FudmFzLCBbe1xuXHRcdGtleTogJ19vbkNhbnZhc0NsaWNrJyxcblxuXG5cdFx0LyrQstC+0YHQv9GA0L7QuNC30LLQtdC00LXQvdC40LUv0L/QsNGD0LfQsCovXG5cdFx0dmFsdWU6IGZ1bmN0aW9uIF9vbkNhbnZhc0NsaWNrKGUpIHtcblx0XHRcdGlmICh0aGlzLnBsYXllci5pc1BsYXlpbmcpIHtcblx0XHRcdFx0dGhpcy5wbGF5ZXIucGF1c2UoKTsgLy/QvtGB0YLQsNC90LDQstC70LjQstCw0LXQvCDQv9C70LXQtdGAINGBINC30LDQs9GA0YPQttC10L3QvdGL0Lwg0LLQuNC00LXQviDQuCDQstC40LTQtdC+INGBINGN0YTRhNC10LrRgtC+0Lxcblx0XHRcdFx0dGhpcy5vdmVybGF5UGxheWVyLnBhdXNlKCk7XG5cdFx0XHRcdHRoaXMuYXVkaW8ucGF1c2UoKTtcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMudDEpOyAvL9C+0YfQuNGJ0LDQtdC8INC40L3RgtC10YDQstCw0LvRiyDQv9C+0LrQsNC30LAg0YHRg9Cx0YLQuNGC0YDQvtCyXG5cdFx0XHRcdGNsZWFyVGltZW91dCh0aGlzLnQyKTtcblx0XHRcdFx0Y2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy50ZXh0UmVxKTsgLy/QvtGH0LjRidCw0LXQvCBmcmFtZSByZXF1ZXN00Ysg0L7RgtGA0LjRgdC+0LLRi9Cy0LDRjtGJ0LjQtSDRgtC10LrRgdGCINC4INC40LfQvtCx0YDQsNC20LXQvdC40LVcblx0XHRcdFx0Y2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy52aWRlb1JlcSk7XG5cdFx0XHRcdHRoaXMucGxheWVyLmlzUGxheWluZyA9ICF0aGlzLnBsYXllci5pc1BsYXlpbmc7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAodGhpcy5jaGVja1N1YnNBdmFpbGFiaWxpdHkoZSkgPT09IGZhbHNlKSB7XG5cdFx0XHRcdFx0Ly/Qv9GA0L7QstC10YDRj9C10Lwg0LTQvtGB0YLRg9C/0L3RiyDQu9C4INGB0YPQsdGC0LjRgtGA0Ytcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH07XG5cdFx0XHRcdHRoaXMuc3Vicy5wYXJzZWRTdWJzID0gdGhpcy5nZXROZWVkZWRTdWJzRm9yVGhpc1RpbWUoKTsgLy/RhNC40LvRjNGC0YDRg9C10Lwg0LzQsNGB0LjQsiDRgSDRgdGD0LHRgtC40YLRgNCw0LzQuCDQsiDRgdC+0L7RgtCy0LXRgtGB0Y/QstC40Lgg0YEg0YLQtdC60YPRidC40Lwg0LLRgNC10LzQtdC90LXQvCDQv9GA0L7QuNCz0YDRi9Cy0LDQvdC40Y9cblx0XHRcdFx0dGhpcy5zdWJzQ3VyctChdWUgPSAwOyAvL9C90LDRh9C40L3QsNC10Lwg0YEg0L/QtdGA0LLQvtC5INGA0LXQv9C70LjQutC4XG5cdFx0XHRcdHRoaXMucGxheWVyLnBsYXkoKTtcblx0XHRcdFx0dGhpcy5vdmVybGF5UGxheWVyLnBsYXkoKTtcblx0XHRcdFx0dGhpcy5hdWRpby5wbGF5KCk7XG5cdFx0XHRcdHRoaXMuc3RhcnRUaW1l0KFvdW50dXAoKTsgLy/QvdCw0YfQuNC90LDQtdC8INCy0YvRh9C40YHQu9GP0YLRjCDQstGA0LXQvNGPINC00L4g0L/QvtC60LDQt9CwINGB0YPQsdGC0LjRgtGA0L7QslxuXHRcdFx0XHRjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnRleHRSZXEpO1xuXHRcdFx0XHR0aGlzLnZpZGVvUmVxID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMud2F0Y2hUaGVWaWRlby5iaW5kKHRoaXMpKTsgLy/QvtGC0YDQuNGB0L7QstGL0LLQsNC10Lwg0LrQsNC00YBcblx0XHRcdFx0dGhpcy5wbGF5ZXIuaXNQbGF5aW5nID0gIXRoaXMucGxheWVyLmlzUGxheWluZztcblx0XHRcdH07XG5cdFx0fVxuXHR9LCB7XG5cdFx0a2V5OiAnZ2V0TmVlZGVkU3Vic0ZvclRoaXNUaW1lJyxcblxuXG5cdFx0LyrRhNGD0L3QutGG0LjRjyDQtNC70Y8g0YTQuNC70YzRgtGA0LDRhtC40Lgg0YHRg9Cx0YLQuNGC0YDQvtCyINC/0YDQuCDQstC+0YHQv9GA0L7QuNC30LLQtdC00LXQvdC40Lgg0L/QvtGB0LvQtSDQv9Cw0YPQt9GLINC40LvQuCDQv9C10YDQtdC80L7RgtC60LgqL1xuXHRcdHZhbHVlOiBmdW5jdGlvbiBnZXROZWVkZWRTdWJzRm9yVGhpc1RpbWUoKSB7XG5cdFx0XHR2YXIgY3VycmVudFRpbWUgPSBwYXJzZUludCh0aGlzLnBsYXllci5wbGF5ZXJFbC5jdXJyZW50VGltZSAqIDEwMDApO1xuXHRcdFx0dmFyIGZpbHRlcmVkU3VicyA9IHRoaXMuc3Vicy5wYXJzZWRTdWJzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuXHRcdFx0XHRpZiAoaXRlbS5lbmRUaW1lID49IGN1cnJlbnRUaW1lKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH07XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBmaWx0ZXJlZFN1YnM7IC8v0LLQvtC30LLRgtGA0LDRidCw0LXQvCDQvNCw0YHRgdC40LIg0YEg0YDQtdC/0LvQuNC60LDQvNC4INC90LDRh9C40L3QsNGPINGBINCx0LvQuNC20LDQudGI0LXQuVxuXHRcdH1cblx0fSwge1xuXHRcdGtleTogJ3Jlc3VtZVBsYXlBZnRlclN1YnMnLFxuXG5cblx0XHQvKtC/0YDQvtC00L7Qu9C20LDQtdC8INCy0L7RgdC/0YDQvtC40LfQstC10LTQtdC90LjQtSDQstC40LTQtdC+LCDQv9C+0YHQu9C1INC/0L7QutCw0LfQsCDRgdGD0LHRgtC40YLRgNC+0LIqL1xuXHRcdHZhbHVlOiBmdW5jdGlvbiByZXN1bWVQbGF5QWZ0ZXJTdWJzKCkge1xuXHRcdFx0dGhpcy5wbGF5ZXIucGxheSgpO1xuXHRcdFx0dGhpcy5zdGFydFRpbWXQoW91bnR1cCgpO1xuXHRcdFx0Y2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy50ZXh0UmVxKTtcblx0XHRcdHRoaXMudmlkZW9SZXEgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy53YXRjaFRoZVZpZGVvLmJpbmQodGhpcykpO1xuXHRcdH1cblx0fSwge1xuXHRcdGtleTogJ3N0YXJ0VGltZdChb3VudHVwJyxcblx0XHR2YWx1ZTogZnVuY3Rpb24gc3RhcnRUaW1lT3VudHVwKCkge1xuXHRcdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdFx0LyrQstGL0YfQuNGB0LvRj9C10Lwg0LLRgNC10LzRjyDQtNC+INC90LDRh9Cw0LvQsCDQv9C+0LrQsNC30LAg0YHRg9Cx0YLQuNGC0YDQvtCyKi9cblx0XHRcdHZhciBkZWxheVRvU3RhcnRPZlN1YnMgPSB0aGlzLnN1YnMucGFyc2VkU3Vic1t0aGlzLnN1YnNDdXJy0KF1ZV0uZW5kVGltZSAtIHBhcnNlSW50KHRoaXMucGxheWVyLnBsYXllckVsLmN1cnJlbnRUaW1lKSAqIDEwMDA7XG5cdFx0XHQvKtCy0YvRh9C40YHQu9GP0LXQvCDQstGA0LXQvNGPINC/0L7QutCw0LfQsCovXG5cdFx0XHR2YXIgcGF1c2VEdXJhdGlvbiA9IHRoaXMuc3Vicy5wYXJzZWRTdWJzW3RoaXMuc3Vic0N1cnLQoXVlXS5lbmRUaW1lIC0gdGhpcy5zdWJzLnBhcnNlZFN1YnNbdGhpcy5zdWJzQ3VyctChdWVdLnN0YXJ0VGltZTtcblxuXHRcdFx0LyrQttC00LXQvCDQv9C+0LrQsCDQv9GA0LjQudC00LXRgiDQstGA0LXQvNGPINC/0L7QutCw0LfQsNGC0Ywg0YHRg9Cx0YLQuNGC0YDRiyovXG5cdFx0XHR0aGlzLnQxID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdF90aGlzLnBsYXllci5wYXVzZSgpO1xuXHRcdFx0XHRjYW5jZWxBbmltYXRpb25GcmFtZShfdGhpcy52aWRlb1JlcSk7XG5cdFx0XHRcdC8v0YDQuNGB0YPQtdC8INGB0YPQsdGC0LjRgtGA0Ytcblx0XHRcdFx0X3RoaXMudGV4dFJlcSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShfdGhpcy5kcm93VGV4dC5iaW5kKF90aGlzKSk7XG5cdFx0XHRcdGNsZWFyVGltZW91dChfdGhpcy50MSk7XG5cblx0XHRcdFx0LyrQttC00LXQvCDQv9C+0LrQsCDQv9GA0LjQudC00LXRgiDQstGA0LXQvNGPINC/0YDQvtC00L7Qu9C20LjRgtGMINCy0L7RgdC/0YDQvtC40LfQstC10LTQtdC90LjQtSovXG5cdFx0XHRcdF90aGlzLnQyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0LyrQv9GA0L7QstC10YDRj9C10Lwg0L3QtSDQt9Cw0LrQvtC90YfQuNC70LjRgdGMINC70Lgg0YHRg9Cx0YLQuNGC0YDRiyovXG5cdFx0XHRcdFx0aWYgKF90aGlzLnN1YnNDdXJy0KF1ZSA8IF90aGlzLnN1YnMucGFyc2VkU3Vicy5sZW5ndGggLSAxKSB7XG5cdFx0XHRcdFx0XHRfdGhpcy5zdWJzQ3VyctChdWUrKztcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0X3RoaXMuc3Vic0N1cnLQoXVlID0gMDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0X3RoaXMucmVzdW1lUGxheUFmdGVyU3VicygpO1xuXHRcdFx0XHRcdGNsZWFyVGltZW91dChfdGhpcy50Mik7XG5cdFx0XHRcdH0sIHBhdXNlRHVyYXRpb24pO1xuXHRcdFx0fSwgZGVsYXlUb1N0YXJ0T2ZTdWJzKTtcblx0XHR9XG5cdH0sIHtcblx0XHRrZXk6ICd3YXRjaFRoZVZpZGVvJyxcblxuXG5cdFx0Ly/RgNC40YHRg9C10Lwg0LrQsNC00YAg0YEg0L/QtdGA0LXQvtC00LjRh9C90L7RgdGC0YzRjiDQutCw0LTRgNC+0LIg0LIg0YHQtdC6XG5cdFx0dmFsdWU6IGZ1bmN0aW9uIHdhdGNoVGhlVmlkZW8oKSB7XG5cdFx0XHR0aGlzLnBhaW50RnJhbWUoKTtcblx0XHRcdGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMudGV4dFJlcSk7XG5cdFx0XHR0aGlzLnZpZGVvUmVxID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMud2F0Y2hUaGVWaWRlby5iaW5kKHRoaXMpKTtcblx0XHR9XG5cdH0sIHtcblx0XHRrZXk6ICdwYWludEZyYW1lJyxcblxuXG5cdFx0Ly/RhNGD0L3QutGG0LjRjyDQvtGC0YDQuNGB0L7QstC60Lgg0LrQsNC00YDQsCDRgSDRjdGE0YTQtdC60YLQvtC8IGdyYXlzY2FsZVxuXHRcdHZhbHVlOiBmdW5jdGlvbiBwYWludEZyYW1lKCkge1xuXHRcdFx0dGhpcy5jb250ZXh0LmRyYXdJbWFnZSh0aGlzLnBsYXllci5wbGF5ZXJFbCwgMCwgMCwgdGhpcy5wbGF5ZXIud2lkdGgsIHRoaXMucGxheWVyLmhlaWdodCk7XG5cdFx0XHQvL9GA0LXQttC40Lwg0L3QsNC70L7QttC10L3QuNGPINC/0L7Qt9Cy0L7Qu9GP0LXRgiDQtNC+0LHQuNGC0YHRjyDRh9C10YDQvdC+LdCx0LXQu9C+0Lkg0LrQsNGA0YLQuNC90LrQuFxuXHRcdFx0dGhpcy5jb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdjb2xvcic7XG5cdFx0XHR0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gJ3JnYigyNTUsIDI1NSwgMjU1KSc7XG5cdFx0XHR0aGlzLmNvbnRleHQuZmlsbFJlY3QoMCwgMCwgdGhpcy5jYW52YXNFbC53aWR0aCwgdGhpcy5jYW52YXNFbC5oZWlnaHQpO1xuXHRcdFx0Ly/RgNC40YHRg9C10Lwg0Y3RhNGE0LXQutGCINGB0YLQsNGA0LjQvdGLXG5cdFx0XHR0aGlzLnBhaW50T3ZlcmxheUVmZmVjdCgpO1xuXHRcdH1cblx0fSwge1xuXHRcdGtleTogJ3BhaW50T3ZlcmxheUVmZmVjdCcsXG5cdFx0dmFsdWU6IGZ1bmN0aW9uIHBhaW50T3ZlcmxheUVmZmVjdCgpIHtcblx0XHRcdC8v0LHQtdGA0LXQvCDQuNC30L7QsdGA0LDQttC10L3QuNC40LUg0LjQtyDQv9C70LXQtdGA0LAg0LTQu9GPINCy0LjQtNC10L4g0YEg0Y3RhNGE0LXQutGC0L7QvCDRgdGC0LDRgNC40L3RiyDQsiDQutCw0L3QstCw0YEg0LTQu9GPINC+0YLRgNC40YHQstC+0LrQuCDRjdGE0YTQtdC60YLQsFxuXHRcdFx0dGhpcy5vdmVybGF5Q2FudmFzQ29udGV4dC5kcmF3SW1hZ2UodGhpcy5vdmVybGF5UGxheWVyLnBsYXllckVsLCAwLCAwLCB0aGlzLm92ZXJsYXlQbGF5ZXIud2lkdGgsIHRoaXMub3ZlcmxheVBsYXllci5oZWlnaHQpO1xuXHRcdFx0dmFyIGltYWdlRGF0YSA9IHRoaXMub3ZlcmxheUNhbnZhc0NvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIHRoaXMuY2FudmFzRWwud2lkdGgsIHRoaXMuY2FudmFzRWwuaGVpZ2h0KTtcblx0XHRcdHRoaXMub3ZlcmxheUNhbnZhc0NvbnRleHQucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCk7XG5cdFx0XHR0aGlzLmNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ211bHRpcGx5Jztcblx0XHRcdC8v0L7RgtGA0LjRgdC+0LLRi9Cy0LDQtdC8INGN0YTRhNC10LrRgiDRgSDRgNC10LbQuNC80L7QvCDQvdCw0LvQvtC20LXQvdC40Y8gbXVsdGlwbHlcblx0XHRcdHRoaXMuY29udGV4dC5kcmF3SW1hZ2UodGhpcy5vdmVybGF5Q2FudmFzLCAwLCAwLCB0aGlzLmNhbnZhc0VsLndpZHRoLCB0aGlzLmNhbnZhc0VsLmhlaWdodCk7XG5cdFx0XHR0aGlzLmNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJztcblx0XHR9XG5cdH0sIHtcblx0XHRrZXk6ICdkcm93VGV4dCcsXG5cblxuXHRcdC8v0YTRg9C90LrRhtC40Y8g0LTQu9GPINC+0YLRgNC40YHQvtCy0LrQuCDRgdGD0LHRgtC40YLRgNC+0LJcblx0XHR2YWx1ZTogZnVuY3Rpb24gZHJvd1RleHQodGV4dCkge1xuXHRcdFx0dGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9ICdyZ2IoNTAsIDUwLCA1MCknO1xuXHRcdFx0Ly/RhNC+0L1cblx0XHRcdHRoaXMuY29udGV4dC5maWxsUmVjdCgwLCAwLCB0aGlzLmNhbnZhc0VsLndpZHRoLCB0aGlzLmNhbnZhc0VsLmhlaWdodCk7XG5cdFx0XHR0aGlzLmNvbnRleHQuZm9udCA9ICczNnB4IE9yYW5pZW5iYXVtJztcblx0XHRcdHRoaXMuY29udGV4dC50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xuXHRcdFx0dGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9ICdyZ2IoMjU1LCAyNTUsIDI1NSknO1xuXHRcdFx0Ly/QtNC10LvQsNC10Lwg0L/QtdGA0LXQvdC+0YHRiyDQv9C+INGB0LvQvtCy0LDQvFxuXHRcdFx0dGhpcy53cmFwVGV4dCh0aGlzLnN1YnMucGFyc2VkU3Vic1t0aGlzLnN1YnNDdXJy0KF1ZV0udGV4dCwgdGhpcy5jYW52YXNFbC53aWR0aCwgNDAsIHRoaXMuY2FudmFzRWwud2lkdGggLyAyLCB0aGlzLmNhbnZhc0VsLmhlaWdodCAvIDIpO1xuXHRcdFx0Ly/QvdCw0LrQu9Cw0LTRi9Cy0LDQtdC8INGN0YTRhNC10LrRgiDRgdGC0LDRgNC40L3Ri1xuXHRcdFx0dGhpcy5wYWludE92ZXJsYXlFZmZlY3QoKTtcblx0XHRcdGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMudmlkZW9SZXEpO1xuXHRcdFx0dGhpcy50ZXh0UmVxID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuZHJvd1RleHQuYmluZCh0aGlzKSk7XG5cdFx0fVxuXHR9LCB7XG5cdFx0a2V5OiAnd3JhcFRleHQnLFxuXG5cblx0XHQvL9C/0LXRgNC10L3QvtGBINGB0YPQsdGC0LjRgtGA0L7QsiDQv9C+INGB0LvQvtCy0LDQvFxuXHRcdHZhbHVlOiBmdW5jdGlvbiB3cmFwVGV4dCh0ZXh0LCBtYXhXaWR0aCwgbGluZUhlaWdodCwgbWFyZ2luTGVmdCwgbWFyZ2luVG9wKSB7XG5cdFx0XHR2YXIgd29yZHMgPSB0ZXh0LnNwbGl0KFwiIFwiKTtcblx0XHRcdHZhciBsaW5lID0gXCJcIjtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgd29yZHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dmFyIHRlbXBvcmFyeVRleHRMaW5lID0gbGluZSArIHdvcmRzW2ldICsgXCIgXCI7XG5cdFx0XHRcdC8v0L/QvtC70YPRh9Cw0LXQvCDRiNC40YDQuNC90YMg0LvQuNC90LjQuCDRgtC10LrRgdGC0LBcblx0XHRcdFx0dmFyIHRlbXBvcmFyeVRleHRMaW5lV2lkdGggPSB0aGlzLmNvbnRleHQubWVhc3VyZVRleHQodGVtcG9yYXJ5VGV4dExpbmUpLndpZHRoO1xuXHRcdFx0XHQvL9C/0YDQvtCy0LXRgNGP0LXQvCDQstC70LDQt9C40YIg0LvQuCDQsiDQutCw0L3QstCw0YFcblx0XHRcdFx0aWYgKHRlbXBvcmFyeVRleHRMaW5lV2lkdGggPiBtYXhXaWR0aCAtIDUwKSB7XG5cdFx0XHRcdFx0dGhpcy5jb250ZXh0LmZpbGxUZXh0KGxpbmUsIG1hcmdpbkxlZnQsIG1hcmdpblRvcCk7XG5cdFx0XHRcdFx0bGluZSA9IHdvcmRzW2ldICsgXCIgXCI7XG5cdFx0XHRcdFx0bWFyZ2luVG9wICs9IGxpbmVIZWlnaHQ7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bGluZSA9IHRlbXBvcmFyeVRleHRMaW5lO1xuXHRcdFx0XHR9O1xuXHRcdFx0fTtcblx0XHRcdHRoaXMuY29udGV4dC5maWxsVGV4dChsaW5lLCBtYXJnaW5MZWZ0LCBtYXJnaW5Ub3ApO1xuXHRcdH1cblx0fSwge1xuXHRcdGtleTogJ2NoZWNrU3Vic0F2YWlsYWJpbGl0eScsXG5cblxuXHRcdC8v0L/RgNC+0LLQtdGA0LrQsCDQtNC+0YHRgtGD0L/QvdC+0YHRgtC4INGB0YPQsdGC0LjRgtGA0L7QslxuXHRcdHZhbHVlOiBmdW5jdGlvbiBjaGVja1N1YnNBdmFpbGFiaWxpdHkoZSkge1xuXHRcdFx0Ly/RhNC70LDQsyDRg9GB0YLQsNC90LDQstC70LjQstCw0LXRgtGB0Y8g0LXRgdC70Lgg0YHRg9Cx0YLQuNGC0YDRiyDQsdGL0LvQuCDRg9GB0L/QtdGI0L3QviDQt9Cw0LPRgNGD0LbQtdC90Ytcblx0XHRcdGlmICghdGhpcy5zdWJzLnJlYWR5KSB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0dGhpcy5wbGF5ZXIucGF1c2UoKTtcblx0XHRcdFx0dGhpcy5wbGF5ZXIucGxheWVyRWwuY3VycmVudFRpbWUgPSAwO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9O1xuXHRcdH1cblx0fV0pO1xuXG5cdHJldHVybiBDYW52YXM7XG59KCk7XG5cbjtcblxudmFyIFN1YnMgPSBmdW5jdGlvbiAoKSB7XG5cdGZ1bmN0aW9uIFN1YnModXJsTWFwKSB7XG5cdFx0dmFyIF90aGlzMiA9IHRoaXM7XG5cblx0XHRfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3Vicyk7XG5cblx0XHR0aGlzLnJlYWR5ID0gZmFsc2U7XG5cdFx0Ly/Qv9C+0LvRg9GH0LDQtdC8INGB0YPQsdGC0LjRgtGA0Ysg0L/QviB1cmxcblx0XHRmZXRjaCh1cmxNYXAuc3Vic1VybCkudGhlbihmdW5jdGlvbiAocmVzKSB7XG5cdFx0XHQvL9C/0LDRgNGB0LjQvCDRgdGD0LHRgtC40YLRgNGLINCyINGC0LXQutGB0YJcblx0XHRcdHJlcy50ZXh0KCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0XHQvL9C/0LDRgNGB0LjQvCDRgdGD0LHRgtC40YLRgNGLINCyIGpzXG5cdFx0XHRcdF90aGlzMi5wYXJzZWRTdWJzID0gX3RoaXMyLnBhcnNlRnJvbVNydChkYXRhKTtcblx0XHRcdFx0X3RoaXMyLnJlYWR5ID0gdHJ1ZTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0X2NyZWF0ZUNsYXNzKFN1YnMsIFt7XG5cdFx0a2V5OiAncGFyc2VGcm9tU3J0JyxcblxuXG5cdFx0Ly/Qv9Cw0YDRgdC40Lwg0YHRg9Cx0YLQuNGC0YDRi1xuXHRcdHZhbHVlOiBmdW5jdGlvbiBwYXJzZUZyb21TcnQoc3J0KSB7XG5cdFx0XHQvL9C40Lcg0YLQtdC60YHRgtCwINCyIGpzLCDQvdCw0LPQu9C+LCDQv9GA0Lgg0L/QvtC80L7RidC4INCx0LjQsdC70LjQvtGC0LXQutC4IHN1YnRpdGxlLXBhcnNlclxuXHRcdFx0dmFyIHBhcnNlZFN1YnMgPSBwYXJzZXIuZnJvbVNydChzcnQpO1xuXHRcdFx0Ly/Qv9GA0LjQstC+0LTQuNC8INCy0YDQtdC80Y8g0Log0YTQvtGA0LzQsNGC0YMg0LzQuNC70LjRgdC10LrRg9C90LRcblx0XHRcdHBhcnNlZFN1YnMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdFx0XHRcdHRpbWVQYXJzZVRvTXMoJ2VuZFRpbWUnLCBpdGVtKTtcblx0XHRcdFx0dGltZVBhcnNlVG9Ncygnc3RhcnRUaW1lJywgaXRlbSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0ZnVuY3Rpb24gdGltZVBhcnNlVG9Ncyh0aW1lVHlwZSwgaXRlbSkge1xuXHRcdFx0XHR2YXIgc3Vic1N0YXJ0VGltZUJ1ZmZlciA9IGl0ZW1bdGltZVR5cGVdLnNwbGl0KCc6Jyk7XG5cdFx0XHRcdHZhciBob3VycyA9IHN1YnNTdGFydFRpbWVCdWZmZXJbMF07XG5cdFx0XHRcdHZhciBtaW5zID0gTnVtYmVyKHN1YnNTdGFydFRpbWVCdWZmZXJbMV0pO1xuXHRcdFx0XHR2YXIgc2Vjc0FuZE1zZWNzQnVmZmVyID0gc3Vic1N0YXJ0VGltZUJ1ZmZlclsyXS5zcGxpdCgnLCcpO1xuXHRcdFx0XHR2YXIgc2VjcyA9IE51bWJlcihzZWNzQW5kTXNlY3NCdWZmZXJbMF0pO1xuXHRcdFx0XHR2YXIgbXNlY3MgPSBOdW1iZXIoc2Vjc0FuZE1zZWNzQnVmZmVyWzFdKTtcblx0XHRcdFx0aXRlbVt0aW1lVHlwZV0gPSBob3VycyAqIDM2MDAwMDAgKyBtaW5zICogNjAwMDAgKyBzZWNzICogMTAwMCArIG1zZWNzO1xuXHRcdFx0fTtcblx0XHRcdHJldHVybiBwYXJzZWRTdWJzO1xuXHRcdH1cblx0fV0pO1xuXG5cdHJldHVybiBTdWJzO1xufSgpO1xuXG47XG5cbnZhciBBdWRpbyA9IGZ1bmN0aW9uICgpIHtcblx0ZnVuY3Rpb24gQXVkaW8oZWwsIHVybCkge1xuXHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBdWRpbyk7XG5cblx0XHR0aGlzLmF1ZGlvRWwgPSBlbDtcblx0XHR0aGlzLnVybCA9IHVybDtcblx0XHR0aGlzLmF1ZGlvU291cmNlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzb3VyY2UnKTtcblx0XHR0aGlzLmF1ZGlvU291cmNlRWwuc2V0QXR0cmlidXRlKCdzcmMnLCB0aGlzLnVybCk7XG5cdFx0dGhpcy5hdWRpb0VsLmFwcGVuZENoaWxkKHRoaXMuYXVkaW9Tb3VyY2VFbCk7XG5cdH1cblxuXHRfY3JlYXRlQ2xhc3MoQXVkaW8sIFt7XG5cdFx0a2V5OiAncGxheScsXG5cdFx0dmFsdWU6IGZ1bmN0aW9uIHBsYXkoKSB7XG5cdFx0XHR0aGlzLmF1ZGlvRWwucGxheSgpO1xuXHRcdH1cblx0fSwge1xuXHRcdGtleTogJ3BhdXNlJyxcblx0XHR2YWx1ZTogZnVuY3Rpb24gcGF1c2UoKSB7XG5cdFx0XHR0aGlzLmF1ZGlvRWwucGF1c2UoKTtcblx0XHR9XG5cdH1dKTtcblxuXHRyZXR1cm4gQXVkaW87XG59KCk7XG5cbjtcblxudmFyIGFwcCA9IG5ldyBBcHAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFwcCcpKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
